---
// src/components/InfoTip.astro
// Info icon with hover tooltip - helps explain metrics to normal investors
interface Props {
  text: string;
  position?: "top" | "bottom" | "left" | "right";
}

const { text, position = "top" } = Astro.props;

const positionClasses = {
  top: "bottom-full left-1/2 -translate-x-1/2 mb-2",
  bottom: "top-full left-1/2 -translate-x-1/2 mt-2",
  left: "right-full top-1/2 -translate-y-1/2 mr-2",
  right: "left-full top-1/2 -translate-y-1/2 ml-2",
};

const arrowClasses = {
  top: "top-full left-1/2 -translate-x-1/2 border-t-void-100",
  bottom: "bottom-full left-1/2 -translate-x-1/2 border-b-void-100",
  left: "left-full top-1/2 -translate-y-1/2 border-l-void-100",
  right: "right-full top-1/2 -translate-y-1/2 border-r-void-100",
};
---

<span class="info-tip-wrapper">
  <button type="button" class="info-tip-btn" aria-label="More information">
    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
  </button>
  <span class:list={["info-tip-content", positionClasses[position]]}>
    {text}
    <span class:list={["info-tip-arrow", arrowClasses[position]]}></span>
  </span>
</span>

<style>
  .info-tip-wrapper {
    @apply relative inline-flex items-center;
  }

  .info-tip-btn {
    @apply text-txt-muted hover:text-cyber transition-colors cursor-help p-0.5 -m-0.5;
  }

  .info-tip-content {
    @apply absolute hidden w-48 px-3 py-2 text-xs text-txt-secondary
           bg-void-100 border border-void-200/50 rounded-lg shadow-xl
           whitespace-normal text-left leading-relaxed;
    z-index: 9999;
  }

  .info-tip-wrapper:hover .info-tip-content,
  .info-tip-wrapper:focus-within .info-tip-content {
    @apply block;
  }

  .info-tip-arrow {
    @apply absolute w-0 h-0 border-4 border-transparent;
  }
</style>
