---
// src/components/BiasIndicator.astro
import { useTranslations, translateBias, type Locale } from "../lib/i18n";

interface Props {
  bias: string | null;
  size?: "sm" | "md" | "lg";
  locale?: Locale;
}

const { bias, size = "md", locale = "en" } = Astro.props;
const t = useTranslations(locale);

function getBiasInfo(bias: string | null) {
  if (!bias) return { class: "bias-neutral", icon: "—" };
  const lower = bias.toLowerCase();
  if (lower.includes("bullish")) return { class: "bias-bullish", icon: "↗" };
  if (lower.includes("bearish")) return { class: "bias-bearish", icon: "↘" };
  return { class: "bias-neutral", icon: "→" };
}

const { class: biasClass, icon } = getBiasInfo(bias);
const label = translateBias(bias, t);

const sizeClasses = {
  sm: "text-xs px-2 py-1",
  md: "text-sm px-3 py-1.5",
  lg: "text-base px-4 py-2",
};
---

<span class:list={[biasClass, sizeClasses[size]]}>
  {label}
  <span class="text-[1.1em] ml-0.5">{icon}</span>
</span>
