---
// src/pages/learn/index.astro
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import TelegramCTA from "../../components/TelegramCTA.astro";
import { absoluteUrl } from "../../lib/site";
import { getLocaleFromUrl, useTranslations, l } from "../../i18n";

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

const breadcrumbLd = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: [
    { "@type": "ListItem", position: 1, name: t("nav.home"), item: absoluteUrl("/") },
    { "@type": "ListItem", position: 2, name: t("nav.learn"), item: absoluteUrl("/learn") }
  ]
};
---

<BaseLayout
  title={t("nav.learn")}
  description={t("learnPage.seoDescription")}
  jsonLd={breadcrumbLd}
  locale={locale}
>
  <Header slot="header" locale={locale} />

  <div class="max-w-4xl mx-auto space-y-10">
    <header class="text-center py-8" data-animate>
      <nav class="text-sm text-txt-muted mb-4">
        <a href={l("/", locale)} class="hover:text-txt-secondary">{t("nav.home")}</a>
        <span class="mx-2">/</span>
        <span class="text-txt-primary">{t("nav.learn")}</span>
      </nav>
      <h1 class="font-display font-bold text-3xl sm:text-5xl text-txt-primary mb-4">
        {t("learnPage.title")}
      </h1>
      <p class="text-lg text-txt-secondary max-w-2xl mx-auto">
        {t("learnPage.subtitle")}
      </p>
    </header>

    <section class="grid gap-6 md:grid-cols-2" data-animate>
      <a href={l("/learn/methodology", locale)} class="card hover:border-cyber/40 transition-colors">
        <div class="text-xs text-txt-muted uppercase tracking-wide mb-2">{t("learnPage.methodology")}</div>
        <div class="font-display font-bold text-xl text-txt-primary mb-2">{t("learn.methodology.title")}</div>
        <p class="text-sm text-txt-secondary">
          {t("learn.methodology.description")}
        </p>
      </a>

      <a href={l("/learn/glossary", locale)} class="card hover:border-cyber/40 transition-colors">
        <div class="text-xs text-txt-muted uppercase tracking-wide mb-2">{t("learnPage.glossary")}</div>
        <div class="font-display font-bold text-xl text-txt-primary mb-2">{t("learnPage.keyTerms")}</div>
        <p class="text-sm text-txt-secondary">
          {t("learn.glossary.description")}
        </p>
      </a>
    </section>

    <section class="card" data-animate>
      <h2 class="font-display font-bold text-xl text-txt-primary mb-4">{t("learnPage.guides")}</h2>
      <div class="grid gap-4 sm:grid-cols-2">
        <a href={l("/guides/how-to-use-signals", locale)} class="card hover:border-cyber/40 transition-colors">
          <div class="font-medium text-txt-primary mb-1">How to Use These Signals</div>
          <div class="text-sm text-txt-muted">A simple 3-step workflow: Macro → Category → Asset.</div>
        </a>
        <a href={l("/guides/bullish-vs-bearish", locale)} class="card hover:border-cyber/40 transition-colors">
          <div class="font-medium text-txt-primary mb-1">{t("learn.bullishBearish.title")}</div>
          <div class="text-sm text-txt-muted">{t("learn.bullishBearish.description")}</div>
        </a>
        <a href={l("/guides/fear-and-greed", locale)} class="card hover:border-cyber/40 transition-colors">
          <div class="font-medium text-txt-primary mb-1">{t("learn.fearGreed.title")}</div>
          <div class="text-sm text-txt-muted">{t("learn.fearGreed.description")}</div>
        </a>
      </div>
    </section>

    <TelegramCTA variant="full" locale={locale} />
  </div>

  <Footer slot="footer" locale={locale} />
</BaseLayout>
